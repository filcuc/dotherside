<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nimrod. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>

<!-- Google fonts -->
<link href='http://fonts.googleapis.com/css?family=Raleway:400,600,900' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'>

<!-- CSS -->
<title>Module NimQml</title>
<style type="text/css" >
/*
Stylesheet for use with Docutils/rst2html.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.

Modified from Chad Skeeters' rst2html-style
https://bitbucket.org/cskeeters/rst2html-style/

Modified by Boyd Greenfield
*/
/* SCSS variables */
/* Text weights */
/* Body colors */
/* Text colors */
/* Link colors */
/* Syntax highlighting colors */
/* Pct changes */
/* Mixins */
/* Body/layout */
html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%; }

/* Where we want fancier font if available */
h1, h2, h3, h4, h5, h6, p.module-desc, table.docinfo + blockquote p, table.docinfo blockquote p, h1 + blockquote p {
  font-family: "Raleway", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif !important; }

h1.title {
  font-weight: 900; }

body {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: 400;
  font-size: 14px;
  line-height: 20px;
  color: #2d2d2d;
  background-color: rgba(252, 248, 244, 0.75); }

/* Skeleton grid */
.container {
  position: relative;
  width: 100%;
  max-width: 960px;
  margin: 0 auto;
  padding: 0 20px;
  box-sizing: border-box; }

.column,
.columns {
  width: 100%;
  float: left;
  box-sizing: border-box; }

/* For devices larger than 400px */
@media (min-width: 400px) {
  .container {
    width: 85%;
    padding: 0; } }
/* For devices larger than 650px */
@media (min-width: 650px) {
  .container {
    width: 80%; }

  .column,
  .columns {
    margin-left: 4%; }

  .column:first-child,
  .columns:first-child {
    margin-left: 0; }

  .one.column,
  .one.columns {
    width: 4.66666666667%; }

  .two.columns {
    width: 13.3333333333%; }

  .three.columns {
    width: 22%; }

  .four.columns {
    width: 30.6666666667%; }

  .five.columns {
    width: 39.3333333333%; }

  .six.columns {
    width: 48%; }

  .seven.columns {
    width: 56.6666666667%; }

  .eight.columns {
    width: 65.3333333333%; }

  .nine.columns {
    width: 74.0%; }

  .ten.columns {
    width: 82.6666666667%; }

  .eleven.columns {
    width: 91.3333333333%; }

  .twelve.columns {
    width: 100%;
    margin-left: 0; }

  .one-third.column {
    width: 30.6666666667%; }

  .two-thirds.column {
    width: 65.3333333333%; } }
/* Customer Overrides */
.footer {
  text-align: center;
  color: #969696;
  padding-top: 10%; }

p.module-desc {
  font-size: 1.1em;
  color: #666666; }

a.link-seesrc {
  color: #aec7d2;
  font-style: italic; }

a.link-seesrc:hover {
  color: #6c9aae; }

#toc-list {
  word-wrap: break-word; }

ul.simple-toc {
  list-style: none; }

ul.simple-toc a.reference-toplevel {
  font-weight: bold;
  color: #0077b3; }

ul.simple-toc-section {
  list-style-type: circle;
  color: #6c9aae; }

ul.simple-toc-section a.reference {
  color: #0077b3; }

cite {
  font-style: italic !important; }

dt > pre {
  border-color: rgba(0, 0, 0, 0.15);
  background-color: transparent;
  margin: 15px 0px 5px; }

dd > pre {
  border-color: rgba(0, 0, 0, 0.1);
  background-color: whitesmoke;
  margin-top: 8px; }

.item > dd {
  margin-left: 10px;
  margin-bottom: 30px; }

/* Nim line-numbered tables */
.line-nums-table {
  width: 100%;
  table-layout: fixed; }

table.line-nums-table {
  border-radius: 4px;
  border: 1px solid #cccccc;
  background-color: whitesmoke;
  border-collapse: separate;
  margin-top: 15px;
  margin-bottom: 25px; }

.line-nums-table tbody {
  border: none; }

.line-nums-table td pre {
  border: none;
  background-color: transparent; }

.line-nums-table td.blob-line-nums {
  width: 28px; }

.line-nums-table td.blob-line-nums pre {
  color: #b0b0b0;
  -webkit-filter: opacity(75%);
  text-align: right;
  border-color: transparent;
  background-color: transparent;
  padding-left: 0px;
  margin-left: 0px;
  padding-right: 0px;
  margin-right: 0px; }

/* Docgen styles */
/* Links */
a {
  color: #0077b3;
  text-decoration: none; }

a:hover,
a:focus {
  color: #00334d;
  text-decoration: underline; }

a:visited {
  color: #00334d; }

a:focus {
  outline: thin dotted #2d2d2d;
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px; }

a:hover,
a:active {
  outline: 0; }

sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline; }

sup {
  top: -0.5em; }

sub {
  bottom: -0.25em; }

img {
  width: auto;
  height: auto;
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic; }

@media print {
  * {
    color: black !important;
    text-shadow: none !important;
    background: transparent !important;
    box-shadow: none !important; }

  a,
  a:visited {
    text-decoration: underline; }

  a[href]:after {
    content: " (" attr(href) ")"; }

  abbr[title]:after {
    content: " (" attr(title) ")"; }

  .ir a:after,
  a[href^="javascript:"]:after,
  a[href^="#"]:after {
    content: ""; }

  pre,
  blockquote {
    border: 1px solid #999;
    page-break-inside: avoid; }

  thead {
    display: table-header-group; }

  tr,
  img {
    page-break-inside: avoid; }

  img {
    max-width: 100% !important; }

  @page {
    margin: 0.5cm; }

  h1 {
    page-break-before: always; }

  h1.title {
    page-break-before: avoid; }

  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3; }

  h2,
  h3 {
    page-break-after: avoid; } }
.img-rounded {
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px; }

.img-polaroid {
  padding: 4px;
  background-color: rgba(252, 248, 244, 0.75);
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }

p {
  margin: 0 0 12px; }

small {
  font-size: 85%; }

strong {
  font-weight: 600; }

em {
  font-style: italic; }

cite {
  font-style: normal; }

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: 600;
  line-height: 20px;
  color: inherit;
  text-rendering: optimizelegibility; }

h1 {
  font-size: 2em;
  padding-bottom: .15em;
  border-bottom: 1px solid #aaaaaa;
  margin-top: 1.0em;
  line-height: 1.2em; }

h1.title {
  padding-bottom: 1em;
  border-bottom: 0px;
  font-size: 2.75em; }

h2 {
  font-size: 1.5em;
  margin-top: 1.5em; }

h3 {
  font-size: 1.3em;
  font-style: italic;
  margin-top: 0.75em; }

h4 {
  font-size: 1.3em;
  margin-top: 0.5em; }

h5 {
  font-size: 1.2em;
  margin-top: 0.25em; }

h6 {
  font-size: 1.1em; }

ul,
ol {
  padding: 0;
  margin: 0 0 10px 25px; }

ul ul,
ul ol,
ol ol,
ol ul {
  margin-bottom: 0; }

li {
  line-height: 20px; }

dl {
  margin-bottom: 20px; }

dt,
dd {
  line-height: 20px; }

dt {
  font-weight: bold; }

dd {
  margin-left: 10px;
  margin-bottom: 26px; }

hr {
  margin: 20px 0;
  border: 0;
  border-top: 1px solid #eeeeee;
  border-bottom: 1px solid #ffffff; }

abbr[title],
abbr[data-original-title] {
  cursor: help;
  border-bottom: 1px dotted #999999; }

abbr.initialism {
  font-size: 90%;
  text-transform: uppercase; }

blockquote {
  padding: 0 0 0 15px;
  margin: 0 0 20px;
  border-left: 5px solid #EFEBE0; }

table.docinfo + blockquote, table.docinfo blockquote, h1 + blockquote {
  border-left: 5px solid #c9c9c9;
}

table.docinfo + blockquote p, table.docinfo blockquote p, h1 + blockquote p {
  margin-bottom: 0;
  font-size: 15px;
  font-weight: 200;
  line-height: 1.5;
  font-style: italic; }

q:before,
q:after,
blockquote:before,
blockquote:after {
  content: ""; }

address {
  display: block;
  margin-bottom: 20px;
  font-style: normal;
  line-height: 20px; }

code,
pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  padding: 0 3px 2px;
  font-weight: 500;
  font-size: 12px;
  color: #444444;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px; }

.pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  font-weight: 600;
  /*color: #504da6;*/
}

code {
  padding: 2px 4px;
  color: #444444;
  white-space: nowrap;
  background-color: white;
  border: 1px solid #777777; }

pre {
  display: block;
  padding: 9.5px;
  margin: 0 10px 10px 10px;
  font-size: 14px;
  line-height: 20px;
  white-space: pre !important;
  overflow-y: hidden;
  overflow: visible;
  overflow-x: auto;
  background-color: whitesmoke;
  border: 1px solid #cccccc;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px; }

pre.prettyprint {
  margin-bottom: 20px; }

pre code {
  padding: 0;
  color: inherit;
  white-space: pre;
  overflow-x: scroll;
  background-color: transparent;
  border: 0; }

.pre-scrollable {
  max-height: 340px;
  overflow-y: scroll; }

table {
  max-width: 100%;
  background-color: transparent;
  border-collapse: collapse;
  border-spacing: 0; }

table th, table td {
  padding: 0px 8px 0px;
}

.table {
  width: 100%;
  margin-bottom: 20px; }

.table th,
.table td {
  padding: 8px;
  line-height: 20px;
  text-align: left;
  vertical-align: top;
  border-top: 1px solid #444444; }

.table th {
  font-weight: bold; }

.table thead th {
  vertical-align: bottom; }

.table caption + thead tr:first-child th,
.table caption + thead tr:first-child td,
.table colgroup + thead tr:first-child th,
.table colgroup + thead tr:first-child td,
.table thead:first-child tr:first-child th,
.table thead:first-child tr:first-child td {
  border-top: 0; }

.table tbody + tbody {
  border-top: 2px solid #444444; }

.table .table {
  background-color: rgba(252, 248, 244, 0.75); }

.table-condensed th,
.table-condensed td {
  padding: 4px 5px; }

.table-bordered {
  border: 1px solid #444444;
  border-collapse: separate;
  *border-collapse: collapse;
  border-left: 0;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px; }

.table-bordered th,
.table-bordered td {
  border-left: 1px solid #444444; }

.table-bordered caption + thead tr:first-child th,
.table-bordered caption + tbody tr:first-child th,
.table-bordered caption + tbody tr:first-child td,
.table-bordered colgroup + thead tr:first-child th,
.table-bordered colgroup + tbody tr:first-child th,
.table-bordered colgroup + tbody tr:first-child td,
.table-bordered thead:first-child tr:first-child th,
.table-bordered tbody:first-child tr:first-child th,
.table-bordered tbody:first-child tr:first-child td {
  border-top: 0; }

.table-bordered thead:first-child tr:first-child > th:first-child,
.table-bordered tbody:first-child tr:first-child > td:first-child,
.table-bordered tbody:first-child tr:first-child > th:first-child {
  -webkit-border-top-left-radius: 4px;
  border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px; }

.table-bordered thead:first-child tr:first-child > th:last-child,
.table-bordered tbody:first-child tr:first-child > td:last-child,
.table-bordered tbody:first-child tr:first-child > th:last-child {
  -webkit-border-top-right-radius: 4px;
  border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px; }

.table-bordered thead:last-child tr:last-child > th:first-child,
.table-bordered tbody:last-child tr:last-child > td:first-child,
.table-bordered tbody:last-child tr:last-child > th:first-child,
.table-bordered tfoot:last-child tr:last-child > td:first-child,
.table-bordered tfoot:last-child tr:last-child > th:first-child {
  -webkit-border-bottom-left-radius: 4px;
  border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px; }

.table-bordered thead:last-child tr:last-child > th:last-child,
.table-bordered tbody:last-child tr:last-child > td:last-child,
.table-bordered tbody:last-child tr:last-child > th:last-child,
.table-bordered tfoot:last-child tr:last-child > td:last-child,
.table-bordered tfoot:last-child tr:last-child > th:last-child {
  -webkit-border-bottom-right-radius: 4px;
  border-bottom-right-radius: 4px;
  -moz-border-radius-bottomright: 4px; }

.table-bordered tfoot + tbody:last-child tr:last-child td:first-child {
  -webkit-border-bottom-left-radius: 0;
  border-bottom-left-radius: 0;
  -moz-border-radius-bottomleft: 0; }

.table-bordered tfoot + tbody:last-child tr:last-child td:last-child {
  -webkit-border-bottom-right-radius: 0;
  border-bottom-right-radius: 0;
  -moz-border-radius-bottomright: 0; }

.table-bordered caption + thead tr:first-child th:first-child,
.table-bordered caption + tbody tr:first-child td:first-child,
.table-bordered colgroup + thead tr:first-child th:first-child,
.table-bordered colgroup + tbody tr:first-child td:first-child {
  -webkit-border-top-left-radius: 4px;
  border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px; }

.table-bordered caption + thead tr:first-child th:last-child,
.table-bordered caption + tbody tr:first-child td:last-child,
.table-bordered colgroup + thead tr:first-child th:last-child,
.table-bordered colgroup + tbody tr:first-child td:last-child {
  -webkit-border-top-right-radius: 4px;
  border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px; }

table.docutils th {
  background-color: #e8e8e8; }

table.docutils tr:hover {
  background-color: whitesmoke; }

.table-striped tbody > tr:nth-child(odd) > td,
.table-striped tbody > tr:nth-child(odd) > th {
  background-color: rgba(252, 248, 244, 0.75); }

.table-hover tbody tr:hover > td,
.table-hover tbody tr:hover > th {
  background-color: rgba(241, 222, 204, 0.75); }

table td[class*="span"],
table th[class*="span"],
.row-fluid table td[class*="span"],
.row-fluid table th[class*="span"] {
  display: table-cell;
  float: none;
  margin-left: 0; }

.hero-unit {
  padding: 60px;
  margin-bottom: 30px;
  font-size: 18px;
  font-weight: 200;
  line-height: 30px;
  color: inherit;
  background-color: rgba(230, 197, 164, 0.75);
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px; }

.hero-unit h1 {
  margin-bottom: 0;
  font-size: 60px;
  line-height: 1;
  letter-spacing: -1px;
  color: inherit; }

.hero-unit li {
  line-height: 30px; }

/* rst2html default used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0; }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 !important; }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 !important; }

.last, .with-subtitle {
  margin-bottom: 0 !important; }

.hidden {
  display: none; }

a.toc-backref {
  text-decoration: none;
  color: #444444; }

blockquote.epigraph {
  margin: 2em 5em; }

dl.docutils dd {
  margin-bottom: 0.5em; }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden; }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/
div.abstract {
  margin: 2em 5em; }

div.abstract p.topic-title {
  font-weight: bold;
  text-align: center; }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em;
  border: medium outset;
  padding: 1em; }

div.note, div.warning {
  margin: 1.5em 0px;
  border: none; }

div.note p.admonition-title,
div.warning p.admonition-title {
  display: none; }

/* Clearfix
 * http://css-tricks.com/snippets/css/clear-fix/
 */
div.note:after,
div.warning:after {
  content: "";
  display: table;
  clear: both; }

div.note p:before,
div.warning p:before {
  display: block;
  float: left;
  font-size: 4em;
  line-height: 1em;
  margin-right: 20px;
  margin-left: 0em;
  margin-top: -10px;
  content: '\0270D';
  /*handwriting*/ }

div.warning p:before {
  content: '\026A0';
  /*warning*/ }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold;
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif; }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: #b30000;
  font-weight: bold;
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif; }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic; }

div.dedication p.topic-title {
  font-weight: bold;
  font-style: normal; }

div.figure {
  margin-left: 2em;
  margin-right: 2em; }

div.footer, div.header {
  clear: both;
  font-size: smaller; }

div.line-block {
  display: block;
  margin-top: 1em;
  margin-bottom: 1em; }

div.line-block div.line-block {
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 1.5em; }

div.sidebar {
  margin: 0 0 0.5em 1em;
  border: medium outset;
  padding: 1em;
  background-color: rgba(252, 248, 244, 0.75);
  width: 40%;
  float: right;
  clear: right; }

div.sidebar p.rubric {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-size: medium; }

div.system-messages {
  margin: 5em; }

div.system-messages h1 {
  color: #b30000; }

div.system-message {
  border: medium outset;
  padding: 1em; }

div.system-message p.system-message-title {
  color: #b30000;
  font-weight: bold; }

div.topic {
  margin: 2em; }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em; }

h1.title {
  text-align: center; }

h2.subtitle {
  text-align: center; }

hr.docutils {
  width: 75%; }

img.align-left, .figure.align-left, object.align-left {
  clear: left;
  float: left;
  margin-right: 1em; }

img.align-right, .figure.align-right, object.align-right {
  clear: right;
  float: right;
  margin-left: 1em; }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto; }

.align-left {
  text-align: left; }

.align-center {
  clear: both;
  text-align: center; }

.align-right {
  text-align: right; }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit; }

/* div.align-center * { */
/*   text-align: left } */
ol.simple, ul.simple {
  margin-bottom: 1em; }

ol.arabic {
  list-style: decimal; }

ol.loweralpha {
  list-style: lower-alpha; }

ol.upperalpha {
  list-style: upper-alpha; }

ol.lowerroman {
  list-style: lower-roman; }

ol.upperroman {
  list-style: upper-roman; }

p.attribution {
  text-align: right;
  margin-left: 50%; }

p.caption {
  font-style: italic; }

p.credits {
  font-style: italic;
  font-size: smaller; }

p.label {
  white-space: nowrap; }

p.rubric {
  font-weight: bold;
  font-size: larger;
  color: maroon;
  text-align: center; }

p.sidebar-title {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: bold;
  font-size: larger; }

p.sidebar-subtitle {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: bold; }

p.topic-title {
  font-weight: bold; }

pre.address {
  margin-bottom: 0;
  margin-top: 0;
  font: inherit; }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em;
  margin-right: 2em; }

pre.code .ln {
  color: grey; }

/* line numbers */
pre.code, code {
  background-color: #eeeeee; }

pre.code .comment, code .comment {
  color: #5c6576; }

pre.code .keyword, code .keyword {
  color: #3B0D06;
  font-weight: bold; }

pre.code .literal.string, code .literal.string {
  color: #0c5404; }

pre.code .name.builtin, code .name.builtin {
  color: #352b84; }

pre.code .deleted, code .deleted {
  background-color: #DEB0A1; }

pre.code .inserted, code .inserted {
  background-color: #A3D289; }

span.classifier {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-style: oblique; }

span.classifier-delimiter {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: bold; }

span.interpreted {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif; }

span.option {
  white-space: nowrap; }

span.pre {
  white-space: pre; }

span.problematic {
  color: #b30000; }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80%; }

table.citation {
  border-left: solid 1px #666666;
  margin-left: 1px; }

table.docinfo {
  margin: 0em;
  margin-top: 2em;
  margin-bottom: 2em;
  font-family: "Raleway", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif !important;
  color: #444444; }

table.docutils {
  margin-top: 0.5em;
  margin-bottom: 0.5em; }

table.footnote {
  border-left: solid 1px #2d2d2d;
  margin-left: 1px; }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em;
  padding-right: 0.5em;
  vertical-align: top; }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: 700;
  text-align: left;
  white-space: nowrap;
  padding-left: 0; }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100%; }

ul.auto-toc {
  list-style-type: none; }

span.DecNumber {
  color: #252dbe; }

span.BinNumber {
  color: #252dbe; }

span.HexNumber {
  color: #252dbe; }

span.OctNumber {
  color: #252dbe; }

span.FloatNumber {
  color: #252dbe; }

span.Identifier {
  color: #3b3b3b; }

span.Keyword {
  font-weight: 600;
  color: #5e8f60; }

span.StringLit {
  color: #a4255b; }

span.LongStringLit {
  color: #a4255b; }

span.CharLit {
  color: #a4255b; }

span.EscapeSequence {
  color: black; }

span.Operator {
  color: black; }

span.Punctuation {
  color: black; }

span.Comment, span.LongComment {
  font-style: italic;
  font-weight: 400;
  color: #484a86; }

span.RegularExpression {
  color: darkviolet; }

span.TagStart {
  color: darkviolet; }

span.TagEnd {
  color: darkviolet; }

span.Key {
  color: #252dbe; }

span.Value {
  color: #252dbe; }

span.RawData {
  color: #a4255b; }

span.Assembler {
  color: #252dbe; }

span.Preprocessor {
  color: #252dbe; }

span.Directive {
  color: #252dbe; }

span.Command, span.Rule, span.Hyperlink, span.Label, span.Reference,
span.Other {
  color: black; }

/* Pop type, const, proc, and iterator defs in nim def blocks */
dt pre > span.Identifier, dt pre > span.Operator {
  color: #155da4;
  font-weight: 700; }

dt pre > span.Identifier ~ span.Identifier, dt pre > span.Operator ~ span.Identifier {
  color: inherit;
  font-weight: inherit; }

dt pre > span.Operator ~ span.Identifier, dt pre > span.Operator ~ span.Operator {
  color: inherit;
  font-weight: inherit; }

/* Nim sprite for the footer (taken from main page favicon) */
.nim-sprite {
  display: inline-block;
  height: 12px;
  width: 12px;
  background-position: 0 0;
  background-size: 12px 12px;
  -webkit-filter: opacity(50%);
  background-repeat: no-repeat;
  background-image: url("data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA==");
  margin-bottom: -5px; }
</style>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">Module NimQml</h1>
    <table class="docinfo" frame="void" rules="none"><col class="docinfo-name" /><col class="docinfo-content" /><tbody valign="top"><tr><th class="docinfo-name">Authors:</th><td><p>Filippo Cucchetto &lt;filippocucchetto@gmail.com&gt;</p>
<p>Will Szumski &lt;will@cowboycoders.org&gt;</p>
</td></tr>
<tr><th class="docinfo-name">Version:</th><td> 0.2.0</td></tr>
<tr><th class="docinfo-name">Date:</th><td> 2015/01/02</td></tr>
</tbody></table>
<h1 id="introduction">Introduction</h1><p>The NimQml module adds Qt Qml bindings to the Nim programming language allowing you to create new modern UI by mixing the Qml declarative syntax and the Nim imperative language.</p>
<p>The NimQml is made by two components:</p>
<ul class="simple"><li>The DOtherSide C++ shared library</li>
<li>The NimQml Nim module</li>
</ul>
<p>This first component implements the glue code necessary for communicating with the Qt C++ library, the latter module wraps the libDOtherSide exported symbols in Nim</p>

<h1 id="building">Building</h1><p>At the time of writing the DOtherSide C++ library must be compiled and installed manually from source.</p>
<p>First clone the DOtherSide git repo</p>
<pre>git clone https://github.com/filcuc/DOtherSide</pre>
<p>than you can proceed with the common CMake build steps</p>
<pre>mkdir build
cd build
cmake ..
make</pre>
<p>If everything goes correctly, you'll have built both the DOtherSide C++ library and the Nim examples</p>

<h1 id="installation">Installation</h1><p>The installation is not mandatory, in fact you could try the built Nim example in the following way</p>
<pre>cd path/to/build/dir
cd Nim/Examples/HelloWorld
export LD_LIBRARY_PATH=path/to/libDOtherSide.so
./HelloWorld</pre>
<p>Given this, you can procede with the installation of the C++ library in the following way</p>
<pre>cd to/build/dir
make install</pre>
<p>or by manually copying the library in your system lib directory</p>
<pre>sudo cp build/dir/path/DOtherSide/libDOtherSide.so /usr/lib</pre>

<h1 id="example-1-helloworld">Example 1: HelloWorld</h1><p>As usual lets start with an HelloWorld example. Most of the NimQml projects are made by one or more nim and qml files. Usually the .nim files contains your app logic and data layer. The qml files contain the presentation layer and expose the data in your nim files.</p>
<p><tt class="docutils literal"><span class="pre">Examples/HelloWorld/main.nim</span></tt></p>
<pre><span class="Keyword">import</span> <span class="Identifier">NimQml</span>
<span class="Keyword">import</span> <span class="Identifier">macros</span>
<span class="Keyword">import</span> <span class="Identifier">typeinfo</span>

<span class="Keyword">proc</span> <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Keyword">var</span> <span class="Identifier">app</span><span class="Punctuation">:</span> <span class="Identifier">QApplication</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
   
  <span class="Keyword">var</span> <span class="Identifier">engine</span><span class="Punctuation">:</span> <span class="Identifier">QQmlApplicationEngine</span>
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">load</span><span class="Punctuation">(</span><span class="StringLit">&quot;main.qml&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">exec</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">when</span> <span class="Identifier">isMainModule</span><span class="Punctuation">:</span>
  <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

</pre><p><tt class="docutils literal"><span class="pre">Examples/HelloWorld/main.qml</span></tt></p>
<pre>import QtQuick 2.2
import QtQuick.Controls 1.2
import QtQuick.Layouts 1.1
import QtQuick.Window 2.1

ApplicationWindow
{
    width: 400
    height: 300
    title: &quot;Hello World&quot;
    Component.onCompleted: visible = true
}
</pre><p>The following example shows the basic steps of each NimQml app</p>
<ol class="simple"><li>Create the QApplication for initializing the Qt runtime</li>
<li>Create the QQmlApplicationEngine and load your main .qml file</li>
<li>Call the <tt class="docutils literal"><span class="pre">exec</span></tt> proc of the QApplication instance for starting</li>
</ol>
<p>the Qt event loop</p>

<h1 id="example-2-exposing-data-to-qml">Example 2: exposing data to Qml</h1><p>The previous example shown you how to create a simple application window and how to startup the Qt event loop.</p>
<p>It's time to explore how to pass data to Qml, but lets see the example code first:</p>
<p><tt class="docutils literal"><span class="pre">Examples/SimpleData/main.nim</span></tt></p>
<pre><span class="Keyword">import</span> <span class="Identifier">NimQml</span>
<span class="Keyword">import</span> <span class="Identifier">macros</span>
<span class="Keyword">import</span> <span class="Identifier">typeinfo</span>

<span class="Keyword">proc</span> <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Keyword">var</span> <span class="Identifier">app</span><span class="Punctuation">:</span> <span class="Identifier">QApplication</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
   
  <span class="Keyword">var</span> <span class="Identifier">engine</span><span class="Punctuation">:</span> <span class="Identifier">QQmlApplicationEngine</span>
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

  <span class="Keyword">var</span> <span class="Identifier">qVar1</span><span class="Punctuation">:</span> <span class="Identifier">QVariant</span>
  <span class="Identifier">qVar1</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">qVar1</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Identifier">qVar1</span><span class="Operator">.</span><span class="Identifier">intVal</span> <span class="Operator">=</span> <span class="DecNumber">10</span>

  <span class="Keyword">var</span> <span class="Identifier">qVar2</span><span class="Punctuation">:</span> <span class="Identifier">QVariant</span>
  <span class="Identifier">qVar2</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">qVar2</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Identifier">qVar2</span><span class="Operator">.</span><span class="Identifier">stringVal</span> <span class="Operator">=</span> <span class="StringLit">&quot;Hello World&quot;</span>

  <span class="Keyword">var</span> <span class="Identifier">qVar3</span><span class="Punctuation">:</span> <span class="Identifier">QVariant</span>
  <span class="Identifier">qVar3</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">qVar3</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Identifier">qVar3</span><span class="Operator">.</span><span class="Identifier">boolVal</span> <span class="Operator">=</span> <span class="Identifier">false</span>
  
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">rootContext</span><span class="Operator">.</span><span class="Identifier">setContextProperty</span><span class="Punctuation">(</span><span class="StringLit">&quot;qVar1&quot;</span><span class="Punctuation">,</span> <span class="Identifier">qVar1</span><span class="Punctuation">)</span> 
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">rootContext</span><span class="Operator">.</span><span class="Identifier">setContextProperty</span><span class="Punctuation">(</span><span class="StringLit">&quot;qVar2&quot;</span><span class="Punctuation">,</span> <span class="Identifier">qVar2</span><span class="Punctuation">)</span>
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">rootContext</span><span class="Operator">.</span><span class="Identifier">setContextProperty</span><span class="Punctuation">(</span><span class="StringLit">&quot;qVar3&quot;</span><span class="Punctuation">,</span> <span class="Identifier">qVar2</span><span class="Punctuation">)</span>
  
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">load</span><span class="Punctuation">(</span><span class="StringLit">&quot;main.qml&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">exec</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">when</span> <span class="Identifier">isMainModule</span><span class="Punctuation">:</span>
  <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

</pre><p><tt class="docutils literal"><span class="pre">Examples/SimpleData/main.qml</span></tt></p>
<pre>import QtQuick 2.2
import QtQuick.Controls 1.2
import QtQuick.Layouts 1.1
import QtQuick.Window 2.1

ApplicationWindow
{
    width: 400
    height: 300
    title: &quot;SimpleData&quot;
    Component.onCompleted: visible = true

    ColumnLayout
    {
        anchors.fill: parent
        SpinBox { value: qVar1}
        TextField { text: qVar2}
        CheckBox { checked: qVar3}
    }
}
</pre><p>The following example shows how to expose simple data types to Qml:</p>
<ol class="simple"><li>Create a QVariant and set its internal value.</li>
<li>Create a property in the Qml root context with a given name.</li>
</ol>
<p>Once a property is set through the <tt class="docutils literal"><span class="pre">setContextProperty</span></tt> proc, it's available globally in all the Qml script loaded by the current engine (see the official Qt documentation for more details about the engine and context objects)</p>
<p>At the time of writing the QVariant class support the following types:</p>
<ul class="simple"><li>int</li>
<li>string</li>
<li>bool</li>
<li>QObject derived classes</li>
</ul>

<h1 id="example-3-exposing-complex-data-and-procedures-to-qml">Example 3: exposing complex data and procedures to Qml</h1><p>As seen by the second example, simple data is fine. However most applications need to expose complex data, functions and update the view when something changes in the data layer. This is achieved by creating an object that derives from QObject.</p>
<p>A QObject is made of :</p>
<ol class="simple"><li><tt class="docutils literal"><span class="pre">Slots</span></tt>: slots are functions that could be called from the qml engine and/or connected to Qt signals</li>
<li><tt class="docutils literal"><span class="pre">Signals</span></tt>: signals allow the sending of events and be connected to slots</li>
<li><tt class="docutils literal"><span class="pre">Properties</span></tt>: properties allow the passing of data to the Qml view and make it aware of changes in the data layer</li>
</ol>
<p>A QObject property is made of three things:</p>
<ul class="simple"><li>a read slot: a method that returns the current value of the property</li>
<li>a write slot: a method that sets the value of the property</li>
<li>a notify signal: emitted when the current value of the property is changed</li>
</ul>
<p>We'll start by looking at the main.nim file</p>
<p><tt class="docutils literal"><span class="pre">Examples/SlotsAndProperties/main.nim</span></tt></p>
<pre><span class="Keyword">import</span> <span class="Identifier">NimQml</span>
<span class="Keyword">import</span> <span class="Identifier">Contact</span>

<span class="Keyword">proc</span> <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Keyword">var</span> <span class="Identifier">app</span><span class="Punctuation">:</span> <span class="Identifier">QApplication</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
   
  <span class="Keyword">var</span> <span class="Identifier">contact</span> <span class="Operator">=</span> <span class="Identifier">newContact</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">contact</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span> 
  
  <span class="Keyword">var</span> <span class="Identifier">engine</span><span class="Punctuation">:</span> <span class="Identifier">QQmlApplicationEngine</span>
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

  <span class="Keyword">var</span> <span class="Identifier">variant</span><span class="Punctuation">:</span> <span class="Identifier">QVariant</span>
  <span class="Identifier">variant</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Identifier">contact</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">variant</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

  <span class="Keyword">var</span> <span class="Identifier">rootContext</span><span class="Punctuation">:</span> <span class="Identifier">QQmlContext</span> <span class="Operator">=</span> <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">rootContext</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Identifier">rootContext</span><span class="Operator">.</span><span class="Identifier">setContextProperty</span><span class="Punctuation">(</span><span class="StringLit">&quot;contact&quot;</span><span class="Punctuation">,</span> <span class="Identifier">variant</span><span class="Punctuation">)</span>
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">load</span><span class="Punctuation">(</span><span class="StringLit">&quot;main.qml&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">exec</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">when</span> <span class="Identifier">isMainModule</span><span class="Punctuation">:</span>
  <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

</pre><p>Here, nothing special happens except:</p>
<ol class="simple"><li>The creation of Contact object</li>
<li>The injection of the Contact object to the Qml root context using the <tt class="docutils literal"><span class="pre">setContextProperty</span></tt> as seen in the previous example</li>
</ol>
<p>The Qml file is as follows:</p>
<p><tt class="docutils literal"><span class="pre">Examples/SlotsAndProperties/main.qml</span></tt></p>
<pre>import QtQuick 2.2
import QtQuick.Controls 1.2
import QtQuick.Layouts 1.1
import QtQuick.Window 2.1

ApplicationWindow
{
	width: 400
	height: 300

	Component.onCompleted: visible = true

	ColumnLayout
	{
	    anchors.fill: parent

	    Label
	    {
	        text: &quot;Current name is:&quot; + contact.name
	    }

	    TextField
	    {
	        id: textField
	    }

	    Button
	    {
	        text: &quot;Change Name&quot;
	        onClicked: contact.name = textField.text 
	    }
	}
}
</pre><p>The qml is made up of: a Label, a TextInput widget, and a button. The label displays the contact name - this automatically updates when the contact name changes.</p>
<p>When clicked, the button updates the contact name with the text from the TextInput widget.</p>
<p>So where's the magic?</p>
<p>The magic is in the Contact.nim file</p>
<p><tt class="docutils literal"><span class="pre">Examples/SlotsAndProperties/Contact.nim</span></tt></p>
<pre><span class="Comment">## Please note we are using templates where ordinarily we would like to use procedures</span>
<span class="Comment">## due to bug: https://github.com/Araq/Nim/issues/1821</span>
<span class="Keyword">import</span> <span class="Identifier">NimQml</span>

<span class="Keyword">type</span> <span class="Identifier">Contact</span> <span class="Operator">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">QObject</span> 
  <span class="Identifier">m_name</span><span class="Punctuation">:</span> <span class="Identifier">string</span>
  
<span class="Keyword">template</span> <span class="Identifier">newContact</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span> <span class="Operator">=</span> 
  <span class="Keyword">var</span> <span class="Identifier">result</span> <span class="Operator">=</span> <span class="Identifier">Contact</span><span class="Punctuation">(</span><span class="Identifier">m_name</span><span class="Punctuation">:</span> <span class="StringLit">&quot;initialName&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">m_name</span> <span class="Operator">=</span> <span class="StringLit">&quot;InitialName&quot;</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">registerSlot</span><span class="Punctuation">(</span><span class="StringLit">&quot;getName&quot;</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="Identifier">QMetaType</span><span class="Operator">.</span><span class="Identifier">QString</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">registerSlot</span><span class="Punctuation">(</span><span class="StringLit">&quot;setName&quot;</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="Identifier">QMetaType</span><span class="Operator">.</span><span class="Identifier">Void</span><span class="Punctuation">,</span> <span class="Identifier">QMetaType</span><span class="Operator">.</span><span class="Identifier">QString</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">registerSignal</span><span class="Punctuation">(</span><span class="StringLit">&quot;nameChanged&quot;</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="Identifier">QMetaType</span><span class="Operator">.</span><span class="Identifier">Void</span><span class="Punctuation">]</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">registerProperty</span><span class="Punctuation">(</span><span class="StringLit">&quot;name&quot;</span><span class="Punctuation">,</span> <span class="Identifier">QMetaType</span><span class="Operator">.</span><span class="Identifier">QString</span><span class="Punctuation">,</span> <span class="StringLit">&quot;getName&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;setName&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;nameChanged&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span>

<span class="Keyword">method</span> <span class="Identifier">getName</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">string</span> <span class="Operator">=</span>
  <span class="Identifier">result</span> <span class="Operator">=</span> <span class="Identifier">self</span><span class="Operator">.</span><span class="Identifier">m_name</span>

<span class="Keyword">method</span> <span class="Identifier">setName</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span><span class="Punctuation">,</span> <span class="Identifier">name</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Keyword">if</span> <span class="Identifier">self</span><span class="Operator">.</span><span class="Identifier">m_name</span> <span class="Operator">!=</span> <span class="Identifier">name</span><span class="Punctuation">:</span>
    <span class="Identifier">self</span><span class="Operator">.</span><span class="Identifier">m_name</span> <span class="Operator">=</span> <span class="Identifier">name</span>
    <span class="Identifier">self</span><span class="Operator">.</span><span class="Identifier">emit</span><span class="Punctuation">(</span><span class="StringLit">&quot;nameChanged&quot;</span><span class="Punctuation">)</span>

<span class="Keyword">method</span> <span class="Identifier">onSlotCalled</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span><span class="Punctuation">,</span> <span class="Identifier">slotName</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">,</span> <span class="Identifier">args</span><span class="Punctuation">:</span> <span class="Identifier">openarray</span><span class="Punctuation">[</span><span class="Identifier">QVariant</span><span class="Punctuation">]</span><span class="Punctuation">)</span> <span class="Operator">=</span> 
  <span class="Keyword">case</span> <span class="Identifier">slotName</span><span class="Punctuation">:</span>
    <span class="Keyword">of</span> <span class="StringLit">&quot;getName&quot;</span><span class="Punctuation">:</span>
      <span class="Identifier">args</span><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span><span class="Operator">.</span><span class="Identifier">stringVal</span> <span class="Operator">=</span> <span class="Identifier">self</span><span class="Operator">.</span><span class="Identifier">getName</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
    <span class="Keyword">of</span> <span class="StringLit">&quot;setName&quot;</span><span class="Punctuation">:</span>
      <span class="Identifier">self</span><span class="Operator">.</span><span class="Identifier">setName</span><span class="Punctuation">(</span><span class="Identifier">args</span><span class="Punctuation">[</span><span class="DecNumber">1</span><span class="Punctuation">]</span><span class="Operator">.</span><span class="Identifier">stringVal</span><span class="Punctuation">)</span>
    <span class="Keyword">else</span><span class="Punctuation">:</span>
      <span class="Keyword">discard</span><span class="Punctuation">(</span><span class="Punctuation">)</span></pre><p>First we declare a QObject subclass and provide a simple new method where we:</p>
<p>1. invoke the <tt class="docutils literal"><span class="pre">create()</span></tt> procedure. This invoke the C++ bridge and allocate a QObject instance</p>
<ol class="simple"><li>register a slot <tt class="docutils literal"><span class="pre">getName</span></tt> for reading the Contact name field</li>
<li>register a slot <tt class="docutils literal"><span class="pre">setName</span></tt> for writing the Contact name</li>
<li>register a signal <tt class="docutils literal"><span class="pre">nameChanged</span></tt> for notify the contact name changes</li>
<li>register a property called <tt class="docutils literal"><span class="pre">name</span></tt> of type <tt class="docutils literal"><span class="pre">QString</span></tt> with the given read, write slots and notify signal</li>
</ol>
<p>Looking at the <tt class="docutils literal"><span class="pre">getName</span></tt> and <tt class="docutils literal"><span class="pre">setName</span></tt> methods, you can see that slots, as defined in Nim, are nothing more than standard methods. The method corresponding to the <tt class="docutils literal"><span class="pre">setName</span></tt> slot demonstrates how to use the <tt class="docutils literal"><span class="pre">emit</span></tt> method to emit a signal.</p>
<p>The last thing to consider is the override of the <tt class="docutils literal"><span class="pre">onSlotCalled</span></tt> method. This method is called by the NimQml library when an invocation occurs from the Qml side for one of the slots belonging to the QObject. The usual implementation for the onSlotCalled method consists of a switch statement that forwards the arguments to the correct slot. If the invoked slot has a return value, this is always in the index position 0 of the args array.</p>

<h1 id="example-4-qtobject-macro">Example 4: QtObject macro</h1><p>The previous example shows how to create a simple QObject, however writing all those <tt class="docutils literal"><span class="pre">register</span></tt> procs and writing the <tt class="docutils literal"><span class="pre">onSlotCalled</span></tt> method becomes boring pretty soon.</p>
<p>Furthermore all this information can be automatically generated. For this purpose you can import the NimQmlMacros module that provides the QtObject macro.</p>
<p>Let's begin as usual with both the main.nim and main.qml files</p>
<p><tt class="docutils literal"><span class="pre">Examples/QtObjectMacro/main.nim</span></tt></p>
<pre><span class="Keyword">import</span> <span class="Identifier">NimQml</span>
<span class="Keyword">import</span> <span class="Identifier">Contact</span>

<span class="Keyword">proc</span> <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Keyword">var</span> <span class="Identifier">app</span><span class="Punctuation">:</span> <span class="Identifier">QApplication</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
   
  <span class="Keyword">var</span> <span class="Identifier">contact</span> <span class="Operator">=</span> <span class="Identifier">newContact</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">contact</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span> 

  <span class="Keyword">var</span> <span class="Identifier">engine</span><span class="Punctuation">:</span> <span class="Identifier">QQmlApplicationEngine</span>
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

  <span class="Keyword">var</span> <span class="Identifier">variant</span><span class="Punctuation">:</span> <span class="Identifier">QVariant</span>
  <span class="Identifier">variant</span><span class="Operator">.</span><span class="Identifier">create</span><span class="Punctuation">(</span><span class="Identifier">contact</span><span class="Punctuation">)</span>
  <span class="Keyword">defer</span><span class="Punctuation">:</span> <span class="Identifier">variant</span><span class="Operator">.</span><span class="Identifier">delete</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

  <span class="Keyword">var</span> <span class="Identifier">rootContext</span><span class="Punctuation">:</span> <span class="Identifier">QQmlContext</span> <span class="Operator">=</span> <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">rootContext</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  <span class="Identifier">rootContext</span><span class="Operator">.</span><span class="Identifier">setContextProperty</span><span class="Punctuation">(</span><span class="StringLit">&quot;contact&quot;</span><span class="Punctuation">,</span> <span class="Identifier">variant</span><span class="Punctuation">)</span>
  <span class="Identifier">engine</span><span class="Operator">.</span><span class="Identifier">load</span><span class="Punctuation">(</span><span class="StringLit">&quot;main.qml&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">app</span><span class="Operator">.</span><span class="Identifier">exec</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">when</span> <span class="Identifier">isMainModule</span><span class="Punctuation">:</span>
  <span class="Identifier">mainProc</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

</pre><p><tt class="docutils literal"><span class="pre">Examples/QtObjectMacro/main.qml</span></tt></p>
<pre>import QtQuick 2.2
import QtQuick.Controls 1.2
import QtQuick.Layouts 1.1
import QtQuick.Window 2.1

ApplicationWindow
{
	width: 400
	height: 300

	Component.onCompleted: visible = true

	ColumnLayout
	{
	    anchors.fill: parent

	    Label
	    {
	        text: &quot;Current name is:&quot; + contact.name
	    }

	    TextField
	    {
	        id: textField
	    }

	    Button
	    {
	        text: &quot;Change Name&quot;
	        onClicked: contact.name = textField.text 
	    }
	}
}
</pre><p>Nothing is new in both the <tt class="docutils literal"><span class="pre">main.nim</span></tt> and <tt class="docutils literal"><span class="pre">main.qml</span></tt> with respect to the previous example. What changed is the Contact object:</p>
<p><tt class="docutils literal"><span class="pre">Examples/QtObjectMacro/Contact.nim</span></tt></p>
<pre><span class="Comment">## Please note we are using templates where ordinarily we would like to use procedures</span>
<span class="Comment">## due to bug: https://github.com/Araq/Nim/issues/1821</span>
<span class="Keyword">import</span> <span class="Identifier">NimQml</span><span class="Punctuation">,</span> <span class="Identifier">NimQmlMacros</span>

<span class="Identifier">QtObject</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">Contact</span><span class="Operator">*</span> <span class="Operator">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">QObject</span>
    <span class="Identifier">m_name</span><span class="Punctuation">:</span> <span class="Identifier">string</span>

  <span class="Keyword">template</span> <span class="Identifier">newContact</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span> <span class="Operator">=</span>
    <span class="Keyword">var</span> <span class="Identifier">result</span> <span class="Operator">=</span> <span class="Identifier">Contact</span><span class="Punctuation">(</span><span class="Identifier">m_name</span><span class="Punctuation">:</span> <span class="StringLit">&quot;initialName&quot;</span><span class="Punctuation">)</span>
    <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">create</span>
    <span class="Identifier">result</span>
  
  <span class="Keyword">method</span> <span class="Identifier">getName</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Identifier">contact</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">string</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">slot</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span>
    <span class="Identifier">result</span> <span class="Operator">=</span> <span class="Identifier">contact</span><span class="Operator">.</span><span class="Identifier">m_name</span>

  <span class="Keyword">method</span> <span class="Identifier">nameChanged</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Identifier">contact</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">signal</span><span class="Operator">.</span><span class="Punctuation">}</span>
  
  <span class="Keyword">method</span> <span class="Identifier">setName</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Identifier">contact</span><span class="Punctuation">:</span> <span class="Identifier">Contact</span><span class="Punctuation">,</span> <span class="Identifier">name</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">slot</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span>
    <span class="Keyword">if</span> <span class="Identifier">contact</span><span class="Operator">.</span><span class="Identifier">m_name</span> <span class="Operator">!=</span> <span class="Identifier">name</span><span class="Punctuation">:</span>
      <span class="Identifier">contact</span><span class="Operator">.</span><span class="Identifier">m_name</span> <span class="Operator">=</span> <span class="Identifier">name</span>
      <span class="Identifier">contact</span><span class="Operator">.</span><span class="Identifier">nameChanged</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  
  <span class="Identifier">QtProperty</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span> <span class="Identifier">name</span><span class="Punctuation">:</span>
    <span class="Identifier">read</span> <span class="Operator">=</span> <span class="Identifier">getName</span>
    <span class="Identifier">write</span> <span class="Operator">=</span> <span class="Identifier">setName</span>
    <span class="Identifier">notify</span> <span class="Operator">=</span> <span class="Identifier">nameChanged</span>
</pre><p>In details:</p>
<ol class="simple"><li>Each QObject is defined inside the QtObject macro</li>
<li>Each slot is annotated with the <tt class="docutils literal"><span class="pre">{.slot.}</span></tt> pragma</li>
<li>Each signal is annotated with the <tt class="docutils literal"><span class="pre">{.signal.}</span></tt> pragma</li>
<li>Each property is created with the <tt class="docutils literal"><span class="pre">QtProperty</span></tt> macro</li>
</ol>
<p>The <tt class="docutils literal"><span class="pre">QtProperty</span></tt> macro has the following syntax</p>
<pre><span class="Identifier">QtProperty</span><span class="Punctuation">[</span><span class="Identifier">typeOfProperty</span><span class="Punctuation">]</span> <span class="Identifier">nameOfProperty</span></pre>


    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small>Made with Nim. Generated: 2015-01-06 12:49:34 UTC</small>
      </div>
    </div>
  </div>
</div>
</body>
</html>
